/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package Graphique.Item;

import Entities.Player;
import Level.LevelManager;
import java.io.Serializable;
import java.util.LinkedHashMap;
import java.util.Random;
import org.newdawn.slick.Animation;
import org.newdawn.slick.Graphics;
import org.newdawn.slick.Image;
import org.newdawn.slick.SlickException;
import org.newdawn.slick.SpriteSheet;
import org.newdawn.slick.geom.Rectangle;
import org.newdawn.slick.geom.Vector2f;

/**
 *
 * @author 1529565
 */
public class Item {

    protected int damage, vitality, armor, range;
    private String description, typeItemString, itemDescription;
    protected Animation[] anim;
    protected static LinkedHashMap<Integer, SpriteSheet> sprites = new LinkedHashMap<>();
    protected static LinkedHashMap<Integer, Animation[]> animations = new LinkedHashMap<>();

    public enum TypeItem {
        WEAPON, CHEST_ARMOR, HELMET, BOOT, OFFHAND
    }
    protected TypeItem type;
    protected int duration = 130;
    private boolean looted;
    Random rand = new Random();
    protected static SpriteSheet itemSheet, itemSheetInventaire;

    protected static SpriteSheet item_0, item_3, item_4, item_5, item_7, item_8, item_24, item_37, item_42, item_44, item_43, item_48, item_55;

    protected Rectangle box;
    protected int id;
    protected boolean picked;
    Random r = new Random();

    protected Vector2f vector = new Vector2f();
    protected int j, i, notPickedSize = 32, width = 50, height = 50;

    public Item(Vector2f vector) throws SlickException {
        this.itemSheet = LevelManager.getItemTexture().itemSheet;
        this.itemSheetInventaire = LevelManager.getItemTexture().itemSheetInventaire;
        this.animations = LevelManager.getItemTexture().animations;
        this.sprites = LevelManager.getItemTexture().sprites;
        this.anim = LevelManager.getItemTexture().anim;
        this.vector = vector;
        box = new Rectangle(vector.x, vector.y, notPickedSize, notPickedSize);

    }

    public void render(Graphics g) {

        i = id / 20;
        j = id % 20;
        g.drawImage(itemSheet.getSprite(j, i), vector.x, vector.y);

    }

    public void renderEquipedItem(Graphics g, Player player) {

        anim = animations.get(id);
        if (player.getDirection() == 1) {
            g.drawAnimation(anim[player.getDirection() + (player.isMoving() ? 4 : 0)], player.getX(), player.getY());
        } else if (player.getDirection() == 3) {
            g.drawAnimation(anim[player.getDirection() + (player.isMoving() ? 4 : 0)], player.getX() - 26, player.getY());
        } else if (player.getDirection() == 2) {
            g.drawAnimation(anim[player.getDirection() + (player.isMoving() ? 4 : 0)], player.getX(), player.getY() - 18);
        } else if (player.getDirection() == 0) {
            g.drawAnimation(anim[player.getDirection() + (player.isMoving() ? 4 : 0)], player.getX(), player.getY() - 18);
        }
    }

    public void setLooted(boolean looted) {
        this.looted = looted;
    }

    public boolean isLooted() {
        return looted;
    }

    public int getId() {
        return id;
    }

    public TypeItem getType() {
        switch (id) {
            case 48:
            case 55:
            case 3:
            case 0:
            case 42:
            case 4:
            case 5:
            case 7:
            case 8:
            case 24:
            case 25:
            case 26:
            case 44:
            case 43:
            case 37:
                type = TypeItem.WEAPON;
                break;
            case 1:
            case 2:
            case 6:
            case 9:
            case 10:
            case 11:
            case 12:
            case 13:
            case 14:
            case 15:
            case 16:
            case 17:
            case 18:
            case 19:
            case 60:
            case 61:
            case 62:
            case 63:
            case 64:
            case 65:
            case 66:
            case 67:
            case 68:
                type = TypeItem.OFFHAND;
                break;
            case 20 : 
            case 21 :
            case 22 :
            case 23 :
                type = TypeItem.BOOT;
                break;
            case 29 :
            case 30 :
            case 31 :
            case 32 :
            case 33 :
            case 34 :
            case 35 :
            case 36 :
            case 38 :
            case 45 :
            case 46:
            case 47 :
            
                type = TypeItem.CHEST_ARMOR;
                break;
                
            case 40 : 
            case 41 :
            case 49 : 
            case 50 : 
            case 51 : 
            case 52 : 
            case 53 :
                type = TypeItem.HELMET;
                break;
                

        }
        return type;

    }

    public String getItemDescription() {
        switch (getId()) {
            case 48:

                itemDescription = "The union of an angel \nand a demon created a \nthird essence."
                        + "Only those children\n can hold this weapon, try\n if you can";

                break;

            case 55:
                itemDescription = "Glow so much that it can\n make you go blind. "
                        + "Better \nclose your eyes";

                break;
            case 3:
                itemDescription = "This staff can make a perfect\n flower drawing,... cool";

                break;
            case 0:
                itemDescription = "Belonged to a great \n wizard monk, it explains\n"
                        + "the useless red ribbons hanging";

                break;
            case 42:

                itemDescription = "Wield it with caution and\n honour, it had"
                        + "belonged to\n the greatest";

                break;
            case 4:
                itemDescription = "This staff have a very\n sensitive trigger, be careful !";

                break;
            case 5:
                itemDescription = "This a beginner training staff,\n you can throw it away...";

                break;
            case 7:
                itemDescription = "It's just red, nothing special...";

                break;
            case 8:
                itemDescription = "Made from glass, long time\n ago this staff was one\n of the most powerful one.\n"
                        + "We moved to plastic now.";

                break;
            case 24:
                itemDescription = "It said that those who\n hold it can seek the\n truth of the crusader.\n"
                        + "Thou shall not end a\n human life with it";

                break;
            case 44:
                itemDescription = "When you hold it, instantly\n become a ninja.";

                break;
            case 43:
                itemDescription = "Can cut trees pretty well";

                break;

            case 37:
                itemDescription = "Forged by the greatest \nMom Lord, it cuts perfectly\n "
                        + "through your favorite vegetables";

                break;

        }
        return itemDescription;
    }

    public Image getImage() {
        return itemSheet.getSprite(j, i);
    }

    public Image getInventaireImage() {
        return itemSheetInventaire.getSprite(j, i);
    }

    public String getTypeItemString() {
        switch (getType()) {
            case BOOT:
                typeItemString = "Boots";
                break;
            case WEAPON:
                typeItemString = "Weapon";
                break;
            case HELMET:
                typeItemString = "Helmet";
                break;
            case OFFHAND:
                typeItemString = "Offhand";
                break;
            case CHEST_ARMOR:
                typeItemString = "Chest";
                break;
        }

        return typeItemString;
    }

    public void getItemStats() {
        switch (getId()) {

            case 48:
                damage = 400;
                vitality = 500;
                armor = 1000;
                range = 5;
                break;

            case 55:
                damage = rand.nextInt(13) + 150;
                vitality = 200;
                armor = 700;
                range = 5;
                break;
            case 3:
                damage = 20;
                vitality = 10;
                armor = 150;
                range = 25;
                break;
            case 0:
                damage = 17;
                vitality = 16;
                armor = 97;
                range = 24;
                break;
            case 42:
                damage = 67;
                vitality = 85;
                armor = 267;
                break;
            case 4:
                damage = 8;
                vitality = 8;
                armor = 22;
                range = 27;
                break;
            case 5:
                damage = 7;
                vitality = 5;
                armor = 19;
                range = 17;
                break;
            case 7:
                damage = 24;
                vitality = 9;
                armor = 19;
                range = 20;
                break;
            case 8:
                damage = 24;
                vitality = 56;
                armor = 40;
                range = 30;
                break;
            case 24:
                damage = 69;
                vitality = 15;
                armor = 69;
                range = 1;
                break;
            case 44:
                damage = 35;
                vitality = 25;
                armor = 5;
                range = 1;
                break;
            case 43:
                damage = 29;
                vitality = 6;
                armor = 37;
                range = 1;
                break;

            case 37:
                damage = rand.nextInt(3) + 1;
                vitality = rand.nextInt(3) + 1;
                armor = rand.nextInt(3) + 1;
                range = 1;
                break;

        }

    }

    public String getDescription() {

        description = getTypeItemString()+"\n"+getItemDescription() + " "
                + "\n\n+ " + damage + " Damage increased"
                + "\n\n+ " + vitality + " % Vitality"
                + "\n\n+ " + armor + " % Damage reduction\n\n"
                + range + " Weapon range";

        return description;

    }

    public int getDamage() {
        return damage;
    }

    public int getArmor() {
        return armor;
    }

    public int getVitality() {
        return vitality;
    }

    public Vector2f getVector() {
        return vector;
    }

    public Rectangle getBox() {
        return box;
    }

    public Animation[] getAnim() {
        return anim;
    }

    public static LinkedHashMap<Integer, Animation[]> getAnimations() {
        return animations;
    }

    public void setId(int id) {
        this.id = id;
    }

}
